# Лабораторная работа 01. Реализация RPC-сервиса с использованием gRPC

## Цель работы:  
• Освоить принципы удаленного вызова процедур (RPC) и их применение
в распределенных системах;  
• Изучить основы фреймворка gRPC и языка определения интерфейсов
Protocol Buffers (Protobuf);  
• Научиться определять сервисы и сообщения с помощью Protobuf;  
• Реализовать клиент-серверное приложение на языке Python с
использованием gRPC;  
• Получить практические навыки в генерации кода, реализации серверной
логики и клиентских вызовов для различных типов RPC.   
## Вариант 7. Управление документами
### Сервис DocumentUploader:  
метод UploadFile(stream FileChunk) для
загрузки файла по частям (Client streaming
RPC).
## Архитектура:
### Сервер (Server). Это независимое приложение (server.py), которое выполняет основную "бизнес-логику".
#### Возможности:  
• Предоставляет сервис. Он реализует и "выставляет наружу" сервис WeatherService, определенный в контракте.  
• Обрабатывает запросы. Он слушает входящие сетевые соединения на определенном порту (50051) и обрабатывает
вызовы от клиентов.  
• Выполняет логику. Генерирует случайные данные о погоде, имитируя реальную работу.  
• Асинхронность. Использует пул потоков для одновременной обработки нескольких
клиентских запросов.  
### Клиент (Client). Это приложение (client.py), которое потребляет функциональность, предоставляемую сервером.
#### Возможности:  
• Инициирует соединение. Устанавливает соединение с сервером по известному адресу (localhost:50051).  
• Вызывает удаленные методы. Обращается к методам сервера так, как будто
это локальные функции.  
• Обрабатывает ответы. Получает и выводит на экран данные, возвращенные сервером.  
### Взаимодействие и Контракт
Ключевым элементом архитектуры является сервисный контракт (Service Contract), определенный в файле document_uploader.proto.  
• Роль контракта. Этот файл является "единым источником правды" для API. Он строго описывает:  
• Какие сервисы доступны (DocumentUploader).  
• Какие методы можно вызвать у каждого сервиса (Client streaming RPC).  
• Какие данные (сообщения) эти методы принимают (CFileChunk) и возвращают (UploadStatus).  
<img width="827" height="704" alt="image" src="https://github.com/user-attachments/assets/5043ca8d-35f8-498e-a0e6-96289c3991aa" />

## Технологический стек:
• Язык определения интерфейсов (IDL): Protocol Buffers (Protobuf)  
• Фреймворк RPC: gRPC  
• Транспортный протокол: HTTP/2  
• Язык программирования: Python 3  
• Ключевые библиотеки Python:  
  a) grpcio  
  b) grpcio-tools  
• Среда выполнения и изоляция:  
  a) ОС: Ubuntu 20.04 (Linux).  
  b) Виртуальное окружение (venv). Инструмент для изоляции зависимостей проекта, гарантирующий, что установленные пакеты (grpcio и др.) не будут конфликтовать с системными или другими проектами.
## Реализация проекта:
### Подготовка окружения и генерация кода:
Первым делом были подготовим необходимые файлы:  
• Файл контракта (document_uploader.proto)  
• Реализация Сервера (server.py)  
• Реализация Клиента (client.py)  
Далее загрузим файлы в VS code, обновим пакет и загрузим python  
<img width="1280" height="641" alt="image" src="https://github.com/user-attachments/assets/4ac5fae9-b07e-4dce-a8f6-380e25a132a0" />
#### Запустим и активируем виртуальное окружение (venv), установим библиотеки gRPC, выполним команду python -m grpc_tools.protoc -I. --python_out=. --grpc_python_out=. booking.proto. Она создала файлы document_uploader_pb2.py и document_uploaderg_pb2_grpc.py, которые содержать сгенерированные классы для клиента и сервера
<img width="1280" height="797" alt="image" src="https://github.com/user-attachments/assets/e3df8268-469c-4b32-aeee-fb2bb65e7d3f" />  
### Запуск и проверка:
Откроем 2 терминала, на одном запустим серверный файл, на втором клиентский файл.   
<img width="1280" height="746" alt="image" src="https://github.com/user-attachments/assets/5f2e2749-917d-46b4-aa63-f5e69ce81888" />  
Клиент загружет текстовый файл, находящийся в витруальном окружении. 
<img width="942" height="668" alt="image" src="https://github.com/user-attachments/assets/b234854f-f8c8-4e67-ab9d-c9fc2f4d6b37" />  
Сервер сохраняет его.  
<img width="1178" height="323" alt="image" src="https://github.com/user-attachments/assets/25d4a299-37e1-4de9-8602-f8c4419b561f" />  
## Вывод:
Было реализовано клиент-серверное приложение на языке Python с
использованием gRPC.  
Получены практические навыки в генерации кода, реализации серверной
логики и клиентских вызовов для различных типов RPC.   
